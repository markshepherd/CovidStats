#!/usr/bin/env node

const { exec } = require('child_process');
const fs = require("fs");

exec('git rev-parse --short HEAD',
        (error, stdout, stderr) => {
            if (stderr !== "") {
                console.log(stderr);
            }
            if (error) {
                console.log("Error fetching hash", error);
            }

            const text = `// generated by getHash\nexport const hash = "${stdout.trim()}";`;
            
            fs.writeFile("src/Hash.js", text, (err) => {
                if (err) {
                    console.log("Error writing src/hash.js", err);
                }
            });
        });

